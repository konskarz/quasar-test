import{o as ie,N as fe,w as f,O as ge,G as X,g as re,x as $,P as C,D as Ae,Q as Ee,R as ze,i as _e,e as ee,l as Fe,r as M,c as d,S as Ie,h as I}from"./index-17298239.js";import{v as Ue,j as Qe,c as Xe,u as je,a as Re,i as ve,b as Ye}from"./use-dark-cac87016.js";import{f as Ne,h as Ke,i as Ge,T as te,j as U}from"./QScrollArea-7c5cc87f.js";function Je(e,o,r){let n;function u(){n!==void 0&&(fe.remove(n),n=void 0)}return ie(()=>{e.value===!0&&u()}),{removeFromHistory:u,addToHistory(){n={condition:()=>r.value===!0,handler:o},fe.add(n)}}}const Ze={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},et=["beforeShow","show","beforeHide","hide"];function tt({showing:e,canShow:o,hideOnRouteChange:r,handleShow:n,handleHide:u,processOnMount:v}){const h=re(),{props:w,emit:p,proxy:E}=h;let l;function H(i){e.value===!0?c(i):g(i)}function g(i){if(w.disable===!0||i!==void 0&&i.qAnchorHandled===!0||o!==void 0&&o(i)!==!0)return;const T=w["onUpdate:modelValue"]!==void 0;T===!0&&(p("update:modelValue",!0),l=i,X(()=>{l===i&&(l=void 0)})),(w.modelValue===null||T===!1)&&S(i)}function S(i){e.value!==!0&&(e.value=!0,p("beforeShow",i),n!==void 0?n(i):p("show",i))}function c(i){if(w.disable===!0)return;const T=w["onUpdate:modelValue"]!==void 0;T===!0&&(p("update:modelValue",!1),l=i,X(()=>{l===i&&(l=void 0)})),(w.modelValue===null||T===!1)&&k(i)}function k(i){e.value!==!1&&(e.value=!1,p("beforeHide",i),u!==void 0?u(i):p("hide",i))}function m(i){w.disable===!0&&i===!0?w["onUpdate:modelValue"]!==void 0&&p("update:modelValue",!1):i===!0!==e.value&&(i===!0?S:k)(l)}f(()=>w.modelValue,m),r!==void 0&&Ue(h)===!0&&f(()=>E.$route.fullPath,()=>{r.value===!0&&e.value===!0&&c()}),v===!0&&ge(()=>{m(w.modelValue)});const s={show:g,hide:c,toggle:H};return Object.assign(E,s),s}let O=0,le,oe,A,ae=!1,me,he,we,B=null;function lt(e){ot(e)&&Ae(e)}function ot(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const o=Ee(e),r=e.shiftKey&&!e.deltaX,n=!r&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),u=r||n?e.deltaY:e.deltaX;for(let v=0;v<o.length;v++){const h=o[v];if(Ge(h,n))return n?u<0&&h.scrollTop===0?!0:u>0&&h.scrollTop+h.clientHeight===h.scrollHeight:u<0&&h.scrollLeft===0?!0:u>0&&h.scrollLeft+h.clientWidth===h.scrollWidth}return!0}function ye(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Q(e){ae!==!0&&(ae=!0,requestAnimationFrame(()=>{ae=!1;const{height:o}=e.target,{clientHeight:r,scrollTop:n}=document.scrollingElement;(A===void 0||o!==window.innerHeight)&&(A=r-o,document.scrollingElement.scrollTop=n),n>A&&(document.scrollingElement.scrollTop-=Math.ceil((n-A)/8))}))}function be(e){const o=document.body,r=window.visualViewport!==void 0;if(e==="add"){const{overflowY:n,overflowX:u}=window.getComputedStyle(o);le=Ne(window),oe=Ke(window),me=o.style.left,he=o.style.top,we=window.location.href,o.style.left=`-${le}px`,o.style.top=`-${oe}px`,u!=="hidden"&&(u==="scroll"||o.scrollWidth>window.innerWidth)&&o.classList.add("q-body--force-scrollbar-x"),n!=="hidden"&&(n==="scroll"||o.scrollHeight>window.innerHeight)&&o.classList.add("q-body--force-scrollbar-y"),o.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,$.is.ios===!0&&(r===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Q,C.passiveCapture),window.visualViewport.addEventListener("scroll",Q,C.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",ye,C.passiveCapture))}$.is.desktop===!0&&$.is.mac===!0&&window[`${e}EventListener`]("wheel",lt,C.notPassive),e==="remove"&&($.is.ios===!0&&(r===!0?(window.visualViewport.removeEventListener("resize",Q,C.passiveCapture),window.visualViewport.removeEventListener("scroll",Q,C.passiveCapture)):window.removeEventListener("scroll",ye,C.passiveCapture)),o.classList.remove("q-body--prevent-scroll"),o.classList.remove("q-body--force-scrollbar-x"),o.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,o.style.left=me,o.style.top=he,window.location.href===we&&window.scrollTo(le,oe),A=void 0)}function at(e){let o="add";if(e===!0){if(O++,B!==null){clearTimeout(B),B=null;return}if(O>1)return}else{if(O===0||(O--,O>0))return;if(o="remove",$.is.ios===!0&&$.is.nativeMobile===!0){B!==null&&clearTimeout(B),B=setTimeout(()=>{be(o),B=null},100);return}}be(o)}function it(){let e;return{preventBodyScroll(o){o!==e&&(e!==void 0||o===!0)&&(e=o,at(o))}}}function rt(){let e=null;const o=re();function r(){e!==null&&(clearTimeout(e),e=null)}return ze(r),ie(r),{removeTimeout:r,registerTimeout(n,u){r(),Qe(o)===!1&&(e=setTimeout(n,u))}}}const pe=150,ct=Xe({name:"QDrawer",inheritAttrs:!1,props:{...Ze,...je,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...et,"onLayout","miniState"],setup(e,{slots:o,emit:r,attrs:n}){const u=re(),{proxy:{$q:v}}=u,h=Re(e,v),{preventBodyScroll:w}=it(),{registerTimeout:p,removeTimeout:E}=rt(),l=_e(Fe,ee);if(l===ee)return console.error("QDrawer needs to be child of QLayout"),ee;let H,g=null,S;const c=M(e.behavior==="mobile"||e.behavior!=="desktop"&&l.totalWidth.value<=e.breakpoint),k=d(()=>e.mini===!0&&c.value!==!0),m=d(()=>k.value===!0?e.miniWidth:e.width),s=M(e.showIfAbove===!0&&c.value===!1?!0:e.modelValue===!0),i=d(()=>e.persistent!==!0&&(c.value===!0||Se.value===!0));function T(t,a){if(Te(),t!==!1&&l.animate(),b(0),c.value===!0){const y=l.instances[_.value];y!==void 0&&y.belowBreakpoint===!0&&y.hide(!1),x(1),l.isContainer.value!==!0&&w(!0)}else x(0),t!==!1&&G(!1);p(()=>{t!==!1&&G(!0),a!==!0&&r("show",t)},pe)}function ne(t,a){qe(),t!==!1&&l.animate(),x(0),b(V.value*m.value),J(),a!==!0?p(()=>{r("hide",t)},pe):E()}const{show:j,hide:W}=tt({showing:s,hideOnRouteChange:i,handleShow:T,handleHide:ne}),{addToHistory:Te,removeFromHistory:qe}=Je(s,W,i),z={belowBreakpoint:c,hide:W},q=d(()=>e.side==="right"),V=d(()=>(v.lang.rtl===!0?-1:1)*(q.value===!0?1:-1)),ue=M(0),P=M(!1),R=M(!1),se=M(m.value*V.value),_=d(()=>q.value===!0?"left":"right"),Y=d(()=>s.value===!0&&c.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:m.value:0),N=d(()=>e.overlay===!0||e.miniToOverlay===!0||l.view.value.indexOf(q.value?"R":"L")>-1||v.platform.is.ios===!0&&l.isContainer.value===!0),D=d(()=>e.overlay===!1&&s.value===!0&&c.value===!1),Se=d(()=>e.overlay===!0&&s.value===!0&&c.value===!1),ke=d(()=>"fullscreen q-drawer__backdrop"+(s.value===!1&&P.value===!1?" hidden":"")),xe=d(()=>({backgroundColor:`rgba(0,0,0,${ue.value*.4})`})),de=d(()=>q.value===!0?l.rows.value.top[2]==="r":l.rows.value.top[0]==="l"),Le=d(()=>q.value===!0?l.rows.value.bottom[2]==="r":l.rows.value.bottom[0]==="l"),Ce=d(()=>{const t={};return l.header.space===!0&&de.value===!1&&(N.value===!0?t.top=`${l.header.offset}px`:l.header.space===!0&&(t.top=`${l.header.size}px`)),l.footer.space===!0&&Le.value===!1&&(N.value===!0?t.bottom=`${l.footer.offset}px`:l.footer.space===!0&&(t.bottom=`${l.footer.size}px`)),t}),Be=d(()=>{const t={width:`${m.value}px`,transform:`translateX(${se.value}px)`};return c.value===!0?t:Object.assign(t,Ce.value)}),Ve=d(()=>"q-drawer__content fit "+(l.isContainer.value!==!0?"scroll":"overflow-auto")),Pe=d(()=>`q-drawer q-drawer--${e.side}`+(R.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(h.value===!0?" q-drawer--dark q-dark":"")+(P.value===!0?" no-transition":s.value===!0?"":" q-layout--prevent-focus")+(c.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${k.value===!0?"mini":"standard"}`+(N.value===!0||D.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(de.value===!0?" q-drawer--top-padding":""))),Me=d(()=>{const t=v.lang.rtl===!0?e.side:_.value;return[[te,De,void 0,{[t]:!0,mouse:!0}]]}),$e=d(()=>{const t=v.lang.rtl===!0?_.value:e.side;return[[te,ce,void 0,{[t]:!0,mouse:!0}]]}),He=d(()=>{const t=v.lang.rtl===!0?_.value:e.side;return[[te,ce,void 0,{[t]:!0,mouse:!0,mouseAllDir:!0}]]});function K(){Oe(c,e.behavior==="mobile"||e.behavior!=="desktop"&&l.totalWidth.value<=e.breakpoint)}f(c,t=>{t===!0?(H=s.value,s.value===!0&&W(!1)):e.overlay===!1&&e.behavior!=="mobile"&&H!==!1&&(s.value===!0?(b(0),x(0),J()):j(!1))}),f(()=>e.side,(t,a)=>{l.instances[a]===z&&(l.instances[a]=void 0,l[a].space=!1,l[a].offset=0),l.instances[t]=z,l[t].size=m.value,l[t].space=D.value,l[t].offset=Y.value}),f(l.totalWidth,()=>{(l.isContainer.value===!0||document.qScrollPrevented!==!0)&&K()}),f(()=>e.behavior+e.breakpoint,K),f(l.isContainer,t=>{s.value===!0&&w(t!==!0),t===!0&&K()}),f(l.scrollbarWidth,()=>{b(s.value===!0?0:void 0)}),f(Y,t=>{L("offset",t)}),f(D,t=>{r("onLayout",t),L("space",t)}),f(q,()=>{b()}),f(m,t=>{b(),Z(e.miniToOverlay,t)}),f(()=>e.miniToOverlay,t=>{Z(t,m.value)}),f(()=>v.lang.rtl,()=>{b()}),f(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(We(),l.animate())}),f(k,t=>{r("miniState",t)});function b(t){t===void 0?X(()=>{t=s.value===!0?0:m.value,b(V.value*t)}):(l.isContainer.value===!0&&q.value===!0&&(c.value===!0||Math.abs(t)===m.value)&&(t+=V.value*l.scrollbarWidth.value),se.value=t)}function x(t){ue.value=t}function G(t){const a=t===!0?"remove":l.isContainer.value!==!0?"add":"";a!==""&&document.body.classList[a]("q-body--drawer-toggle")}function We(){g!==null&&clearTimeout(g),u.proxy&&u.proxy.$el&&u.proxy.$el.classList.add("q-drawer--mini-animate"),R.value=!0,g=setTimeout(()=>{g=null,R.value=!1,u&&u.proxy&&u.proxy.$el&&u.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function De(t){if(s.value!==!1)return;const a=m.value,y=U(t.distance.x,0,a);if(t.isFinal===!0){y>=Math.min(75,a)===!0?j():(l.animate(),x(0),b(V.value*a)),P.value=!1;return}b((v.lang.rtl===!0?q.value!==!0:q.value)?Math.max(a-y,0):Math.min(0,y-a)),x(U(y/a,0,1)),t.isFirst===!0&&(P.value=!0)}function ce(t){if(s.value!==!0)return;const a=m.value,y=t.direction===e.side,F=(v.lang.rtl===!0?y!==!0:y)?U(t.distance.x,0,a):0;if(t.isFinal===!0){Math.abs(F)<Math.min(75,a)===!0?(l.animate(),x(1),b(0)):W(),P.value=!1;return}b(V.value*F),x(U(1-F/a,0,1)),t.isFirst===!0&&(P.value=!0)}function J(){w(!1),G(!0)}function L(t,a){l.update(e.side,t,a)}function Oe(t,a){t.value!==a&&(t.value=a)}function Z(t,a){L("size",t===!0?e.miniWidth:a)}return l.instances[e.side]=z,Z(e.miniToOverlay,m.value),L("space",D.value),L("offset",Y.value),e.showIfAbove===!0&&e.modelValue!==!0&&s.value===!0&&e["onUpdate:modelValue"]!==void 0&&r("update:modelValue",!0),ge(()=>{r("onLayout",D.value),r("miniState",k.value),H=e.showIfAbove===!0;const t=()=>{(s.value===!0?T:ne)(!1,!0)};if(l.totalWidth.value!==0){X(t);return}S=f(l.totalWidth,()=>{S(),S=void 0,s.value===!1&&e.showIfAbove===!0&&c.value===!1?j(!1):t()})}),ie(()=>{S!==void 0&&S(),g!==null&&(clearTimeout(g),g=null),s.value===!0&&J(),l.instances[e.side]===z&&(l.instances[e.side]=void 0,L("size",0),L("offset",0),L("space",!1))}),()=>{const t=[];c.value===!0&&(e.noSwipeOpen===!1&&t.push(Ie(I("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),Me.value)),t.push(ve("div",{ref:"backdrop",class:ke.value,style:xe.value,"aria-hidden":"true",onClick:W},void 0,"backdrop",e.noSwipeBackdrop!==!0&&s.value===!0,()=>He.value)));const a=k.value===!0&&o.mini!==void 0,y=[I("div",{...n,key:""+a,class:[Ve.value,n.class]},a===!0?o.mini():Ye(o.default))];return e.elevated===!0&&s.value===!0&&y.push(I("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(ve("aside",{ref:"content",class:Pe.value,style:Be.value},y,"contentclose",e.noSwipeClose!==!0&&c.value===!0,()=>$e.value)),I("div",{class:"q-drawer-container"},t)}}});export{ct as Q};
